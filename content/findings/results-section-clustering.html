---
title: "Sequence Clustering"
description: "Clustering post-military veteran career sequences and exploring these results"
weight: 4
draft: false
output: html_document
editor_options: 
  chunk_output_type: console
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>


<p>In the previous <strong>Sequence Exploration</strong>, we introduced the following sequence state naming system, shown in Table 1.</p>
<p><div id="htmlwidget-1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"filter":"none","data":[["Zone 1","Zone 2","Zone 3","Zone 4","Zone 5","Missing zone","Military","Unemployed","Military transition unemployed","Civilian unemployed","Retired"],["Z1","Z2","Z3","Z4","Z5","MISSING","MILITARY","UNEMP","TR UNEMP","CV UNEMP","RETIRED"],["O*NET SOC Code","O*NET SOC Code","O*NET SOC Code","O*NET SOC Code","O*NET SOC Code","O*NET SOC Code","O*NET SOC Code","seqdef() gaps =","seqdef() left =","seqdef() gaps =","seqdef() right ="],["Job Zones group occupations into one of five categories based on levels of education, experience, and training necessary to perform the occupation. We matched O*NET SOC occupation codes from BGT resume items to O*NET job zones. Zone 1 is little to no preparation needed.","Zone 2 is some preparation needed.","Zone 3 is medium preparation needed.","Zone 4 is considerable preparation needed.","Zone 5 is extensive preparation needed.","A resume item that was missing an O*NET SOC code.","A resume item with O*NET SOC code for Military occupations (those beginning with \"55-\").","Gaps in time for resume items.","Gaps after the last Military job resume item and before civilian jobs begin.","Gaps in between civilian jobs.","Gaps after the last civilian job."],["Whole career &amp; 10 years post military","Whole career &amp; 10 years post military","Whole career &amp; 10 years post military","Whole career &amp; 10 years post military","Whole career &amp; 10 years post military","Whole career &amp; 10 years post military","Whole career","Whole career","10 years post military","10 years post military","10 years post military"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>State name<\/th>\n      <th>Abbreviated<\/th>\n      <th>Source<\/th>\n      <th>Definition<\/th>\n      <th>Used for which sequence object?<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":"500px","dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script> <span class="math display">\[\text{Table 1. Overview of Sequence States}\]</span></p>
<div id="year-to-year-transition-matrix" class="section level3">
<h3>Year-to-Year Transition Matrix</h3>
<p>In the sequence analysis, we want to categorize sequential pattern of the job levels. One approach for categorizing sequences is to compute the distance between two sequences. For example, we have two job state sequences and each sequence is composed of three states: <span class="math display">\[S_1 = \{ \text{zone 1, zone 2, zone 3} \}\]</span> <span class="math display">\[S_2 = \{ \text{zone 1, zone 1, zone 3} \}\]</span> The difference between <span class="math inline">\(S_1\)</span> and <span class="math inline">\(S_2\)</span> is at the second state where <span class="math inline">\(S_1\)</span> has zone 2 while <span class="math inline">\(S_2\)</span> has zone 1. To transform <span class="math inline">\(S_1\)</span> to <span class="math inline">\(S_2\)</span>, we substitude zone 2 with zone 1 at state 2. We use the minimum number of substitution that is required to transform one sequence to another sequence to reflect the distance between these two sequences. This is known as &quot;indels&quot;. However not all substitutions are the same: substitute zone 1 with zone 5 is way more costly than substituting with zone 2. Therefore, we use transition rate to estimate the cost to transform from one state to another state.</p>
<p>Transition matrix is composed of transition rates between each pair of states. Transition matrix has dimension <span class="math inline">\(k \times k\)</span>, k being the number of job states, Since we have 9 job states, our transition matrix has dimension <span class="math inline">\(9 \times 9\)</span>.</p>
<p>Darker the color, higher the transition probability between two states. Before standardization, the diagnal, meaning no change in state, have the highest probability.</p>
<p><img src="/findings/results-section-clustering_files/figure-html/unnamed-chunk-4-1.png" width="960" /></p>
<p><span class="math display">\[\text{Fig 1. Year-to-Year Transition Matrix}\]</span></p>
</div>
<div id="state-transition-matrix" class="section level3">
<h3>State Transition Matrix</h3>
<p>For sequence clustering, our next step is to construct a substitution-cost matrix <span class="math inline">\(SC\)</span> using the formula <span class="math display">\[SC(i,j) = 2 -T(i,j) -T(j,i)\]</span></p>
<p>Substitution-cost matrix reflects the cost for substituting a job state with another. <span class="math inline">\(SC(i,j)\)</span> represent the cost for changing from the current job state <span class="math inline">\(i\)</span> to the next job state <span class="math inline">\(j\)</span>, for <span class="math inline">\(i \in [1,9], j \in [1,9]\)</span>. We then use transition rate to construct substitution-cost matrix using the formula <span class="math display">\[SC(i, j) = \begin{cases}
2-T(i,j)-T(j,i), &amp; i \neq j\\
0, &amp; i=j
\end{cases}\]</span></p>
<p>The consequence for the diagnal to have large transition probability is the consistent cost between job state <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> that <span class="math inline">\(SC(i, j)\)</span> will be approximately 2. In order to make the difference between two different states more visible, we standardize the transition matrix by excluding the diagnal when constructing the transition matrix. Figure 2 shows the standardized transition matrix that reflects changes between states. Having diagnal as 0, we can better observe the difference of the transition probability between two different states.</p>
<p><img src="/findings/results-section-clustering_files/figure-html/unnamed-chunk-5-1.png" width="960" /></p>
<p><span class="math display">\[\text{Fig 2. State Transition Matrix}\]</span></p>
</div>
<div id="clustering" class="section level3">
<h3>Clustering</h3>
<p>We identified 5185 post-military sequences, and there are 2113 (40.8%) distinct sequences. We identified 7 types of sequences, which are identified as clusters according to the sequence analysis. As shown in Figure 3, Cluster 1, 2, 3 are mainly composed of veterans in job zone 4. Specifically, veterans in Cluster 1 had many years' of traerans in Cluster 2 worked for a short period of time in job zone 4 and retired. Veterans in Cluster 3 worked in job zone 4-jobs for 10 years post-military.</p>
<p><img src="/findings/results-section-clustering_files/Fig3.png" style="width:100.0%" height="900" /> <span class="math display">\[\text{Fig 3. Clusters Most Common in Job Zone 4}\]</span></p>
<p>As shown in Fig 4, we observe for the majority of the veterans in Cluster 4 had a career promotion where they started with job zone 3 and went into job zone 4. We do recognize a small proportion of the veterans in this cluster had a demotion from job zone 5 to job zone 4.</p>
<p><img src="/findings/results-section-clustering_files/Fig4.png" style="width:100.0%" height="300" /> <span class="math display">\[\text{Fig 4. Career Promotion Cluster}\]</span></p>
<p>As shown in Fig 5, Cluster 5, 6, 7 do no exibit a change in post-military career. Cluster 5, 6, 7 are composed of jobs in job zone 5, job zone 2, and job zone 3 respectively.</p>
<div class="figure">
<img src="/findings/results-section-clustering_files/Fig5.png" style="width:100.0%" height="900" />

</div>
<p><span class="math display">\[\text{Fig 5. Clusters Most Common in Job Zone 2, 3, 5}\]</span></p>
<p><br> <br> <br> <br> <br> <br></p>
</div>
<div id="do-veterans-education-background-influence-their-career-trajectory" class="section level3">
<h3>Do veterans' education background influence their career trajectory?</h3>
<p>To understand how veterans developed different career trajectories, we investigated whether gender and highest degree earned are associated with the career clusters.</p>
<p>First, let's take a look at a frequency plot shown in Figure 6. Here we are showing the number of veterans with different degrees in each of these 8 clusters. Since the majority of our veteran sample had highest degree as bachelor's and master's degree, here we present the percentage of veterans in each of the eight clusters for each highest degree earned. Thus each row adds up to 1.</p>
<div class="figure">
<img src="/findings/results-section-clustering_files/Fig6.png" style="width:100.0%" height="500" />

</div>
<p><span class="math display">\[\text{Fig 6. Cluster Distribution by Different Levels of Education}\]</span></p>
<p><br> <br></p>
</div>
<div id="statistical-significance-test" class="section level3">
<h3>Statistical significance test</h3>
<p>To test whether the differences we observed before are statistically significant, we performed Pearson's <span class="math inline">\(\chi^2\)</span>-test and Fisher's exact test. Fisher's exact test is used when at least a 20% of the expected cell counts are small (&lt; 5). These are formal test of association between two categorical variables. First, we constructed a two-way freqency table as shown in Table 2. For example, there are 44 veterans who had a high school's degree as their highest degree earned and were categorized in Cluster 2. The expected count is 34 assuming cluster and highest degree earned are independent. We are testing our hypothesis <span class="math display">\[H_0: \text{Odds Ratio} =1\]</span> <span class="math display">\[H_A: \text{Odds Ratio} \neq 1\]</span></p>
<p><style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#mxrlwdhmcm .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mxrlwdhmcm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mxrlwdhmcm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mxrlwdhmcm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mxrlwdhmcm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mxrlwdhmcm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mxrlwdhmcm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mxrlwdhmcm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mxrlwdhmcm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mxrlwdhmcm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mxrlwdhmcm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mxrlwdhmcm .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#mxrlwdhmcm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mxrlwdhmcm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mxrlwdhmcm .gt_from_md > :first-child {
  margin-top: 0;
}

#mxrlwdhmcm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mxrlwdhmcm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mxrlwdhmcm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#mxrlwdhmcm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mxrlwdhmcm .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#mxrlwdhmcm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mxrlwdhmcm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mxrlwdhmcm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mxrlwdhmcm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mxrlwdhmcm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#mxrlwdhmcm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mxrlwdhmcm .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#mxrlwdhmcm .gt_left {
  text-align: left;
}

#mxrlwdhmcm .gt_center {
  text-align: center;
}

#mxrlwdhmcm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mxrlwdhmcm .gt_font_normal {
  font-weight: normal;
}

#mxrlwdhmcm .gt_font_bold {
  font-weight: bold;
}

#mxrlwdhmcm .gt_font_italic {
  font-style: italic;
}

#mxrlwdhmcm .gt_super {
  font-size: 65%;
}

#mxrlwdhmcm .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="mxrlwdhmcm" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style>Two-way Frequency Table</th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">cluster 2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">not cluster 2</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left gt_stub">High School's degree</td>
      <td class="gt_row gt_left">44 [34]</td>
      <td class="gt_row gt_left">889 [899]</td>
    </tr>
    <tr>
      <td class="gt_row gt_left gt_stub">others</td>
      <td class="gt_row gt_left">64 [74]</td>
      <td class="gt_row gt_left">1958 [1948]</td>
    </tr>
  </tbody>
  
  
</table></div> <span class="math display">\[\text{Table 2. Two-way Frequency Table}\]</span> <img src="/findings/results-section-clustering_files/figure-html/unnamed-chunk-9-1.png" width="672" /> <span class="math display">\[\text{Fig 7. P-values from the Association Tests Before Correction for Multiple Tests}\]</span></p>
</div>
<div id="bonferroni-correction" class="section level3">
<h3>Bonferroni correction</h3>
<p>After Bonferroni correction for multiple testings, we are still observing some highest degree earned within cluster 5, 6, and 7 being statistically different from others. Specifially, we are observing veterans with master's or doctor's degree are more likely to be in Cluster 5, which is composed of mostly level-5 jobs 10-years post-military. Veterans with high school's, associate's, or master's are more likely to be in Cluster 6, which is composed of mostly level-2 jobs with some military transitional unemployment and retirement 10-years post-military. We are also observing veterans with high school's degree are more likely to be in Cluster 7, which is mostly composed of level-3 jobs.</p>
<p><img src="/findings/results-section-clustering_files/figure-html/unnamed-chunk-10-1.png" width="672" /> <span class="math display">\[\text{Fig 8. P-values from the Association Tests With Bonferroni Correction}\]</span></p>
</div>
<div id="benjamini-hochberg-correction" class="section level3">
<h3>Benjamini &amp; Hochberg correction</h3>
<p><img src="/findings/results-section-clustering_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p><span class="math display">\[\text{Fig 9. P-values from the Association Tests With Benjamini &amp; Hochberg Correction}\]</span></p>
<p><br> <br> <br></p>
</div>
<div id="do-female-and-male-veterans-have-different-career-trajectory" class="section level3">
<h3>Do Female and Male Veterans have different career trajectory?</h3>
<p>In our sample, we have 15.9% (N=824) female veterans, 84.1% (N=3666) male veterans. We conducted <span class="math inline">\(\chi^2\)</span> test. Using 0.05 as the critical value, we conclude that female is statistically different from male only in cluster 2 (p &lt; 0.001) after using Bonferroni correction. Cluster 2 identified veterans who retired after exiting military. According to our correlation test, we conclude that female veterans are more likely to retire or exiting worke force post-military.</p>
<div class="figure">
<img src="/findings/results-section-clustering_files/Fig10.png" style="width:100.0%" height="500" />

</div>
<p><span class="math display">\[\text{Fig 10. Cluster Distribution by Gender}\]</span> ### References</p>
</div>
